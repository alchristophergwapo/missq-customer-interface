<ion-content class="background">
    <ion-card>
        <div class="back">
            <img height="30" float-left src="assets/images/back2.png" [routerLink]="['/home']">
        </div>
        <form #form="ngForm" novalidate (ngSubmit)="register(form); form.reset()" novalidate><br>
            <img alt="logo" id="header_logo" height="100" float-left src="assets/images/msqlogo.png">
            <ion-card-title>
                <div text-center>
                    <h3>Create Your Account!</h3>
                </div>
            </ion-card-title>
            <ion-card-content>
                <div padding>
                    <ion-item>
                        &nbsp;
                        <ion-icon name="person-circle-sharp"></ion-icon>&nbsp;
                        <ion-input name="name" [(ngModel)]='user.name' type="text" #nameCtrl="ngModel" placeholder=" Full Name" ngModel required></ion-input>
                    </ion-item>
                    <ion-label *ngIf="!nameCtrl.valid && nameCtrl.touched && nameCtrl.errors?.required">
                        <ion-text color="danger">Name is required</ion-text>
                    </ion-label><br>
                    <ion-item>
                        <ion-icon name="location-sharp"></ion-icon>&nbsp;
                        <ion-input name="address" [(ngModel)]='user.address' #addCtrl="ngModel" type="text" placeholder="Address" ngModel required></ion-input>
                    </ion-item>
                    <ion-label *ngIf="!addCtrl.valid && addCtrl.touched && addCtrl.errors?.required">
                        <ion-text color="danger">Address is required</ion-text>
                    </ion-label><br>
                    <ion-item>
                        <ion-select>
                            <ion-select-option *ngFor="let per of dataList">({{per.name}}) {{per.dial_code}}</ion-select-option>
                        </ion-select>
                    </ion-item><br>
                    <ion-item>
                        <ion-icon name="call-sharp"></ion-icon>&nbsp;
                        <ion-input name="phone" [(ngModel)]='user.phone' type="number" #phoneCtrl="ngModel" placeholder="Phone Number" ngModel required number></ion-input>
                    </ion-item>
                    <ion-label *ngIf="!phoneCtrl.valid && phoneCtrl.touched && phoneCtrl.errors?.required">
                        <ion-text color="danger">Phone Number is required</ion-text>
                    </ion-label><br>
                    <ion-item>
                        <ion-icon name="mail-sharp"></ion-icon>&nbsp;
                        <ion-input name="email" [(ngModel)]='user.email' type="email" #emailCtrl="ngModel" placeholder="your@gmail.com" ngModel required email></ion-input>
                    </ion-item>
                    <ion-label *ngIf="!emailCtrl.valid && emailCtrl.touched && emailCtrl.errors?.required">
                        <ion-text color="danger">Email is required</ion-text>
                    </ion-label><br>
                    <ion-item>
                        <ion-icon name="calendar-sharp"></ion-icon>&nbsp;
                        <ion-input name="birth_date" [(ngModel)]='user.birth_date' type="date" #dateCtrl="ngModel" placeholder="Birth Date" ngModel required></ion-input>
                    </ion-item>
                    <ion-label *ngIf="!dateCtrl.valid && dateCtrl.touched && dateCtrl.errors?.required">
                        <ion-text color="danger">Date is required.</ion-text>
                    </ion-label><br>
                    <ion-item>
                        <ion-icon name="key-outline"></ion-icon>&nbsp;
                        <ion-input name="password" [(ngModel)]='user.password' compare-password="confirm" type="password" #password="ngModel" placeholder="Password" ngModel required></ion-input>
                    </ion-item>
                    <ion-label *ngIf="!password.valid && password.touched && password.errors?.required">
                        <ion-text color="danger">Password is required</ion-text>
                    </ion-label><br>
                    <ion-item>
                        <ion-icon name="key-sharp"></ion-icon>&nbsp;
                        <ion-input name="confirm" [(ngModel)]='user.confirm' compare-password="password" type="password" #confirm="ngModel" placeholder="Confirm Password" ngModel required>
                        </ion-input>
                        <span class="text-danger" *ngIf="confirm.dirty && confirm.errors && confirm.errors.required">Password is required </span>
                        <span class="text-danger" *ngIf="confirm.dirty && ((password.errors && password.errors.compare) || (confirm.errors && confirm.errors.compare)) && !confirm.errors.required">Password Doesn't match</span>
                    </ion-item><br>

                    <!-- <ion-label *ngIf="!confirm.valid && confirm.touched && confirm.errors?.required">
                        <ion-text color="danger">Password is required.</ion-text>
                    </ion-label>
                    <ion-text *ngIf="(confirm.dirty || confirm.touched) && confirm.invalid">
                        <p class="warning-text" *ngIf="confirm.hasError('notEqual') && confirm.valid">
                            Passwords Don't Match
                        </p>
                    </ion-text><br> -->
                    <ion-item>
                        <ion-icon name="image-sharp"></ion-icon>&nbsp;
                        <ion-label slot="end">Picture(Selfie)</ion-label>
                        <ion-input name="picture" [(ngModel)]='user.picture' type="file" (change)="loadImageFromDevice($event)" id="file-input" accept="image/png, image/jpeg" name="picture" #picCtrl="ngModel" ngModel required></ion-input>
                    </ion-item><br>
                    <ion-item>
                        <ion-icon name="image-sharp"></ion-icon>&nbsp;
                        <ion-label slot="end">Picture(ID)</ion-label>
                        <ion-input (change)="loadImageFromDevice($event)" id="file-input" accept="image/png, image/jpeg" name="id_image" [(ngModel)]='user.id_image' type="file" #picCtrl="ngModel" placeholder="ID Picture" ngModel required>
                        </ion-input>
                    </ion-item><br>
                    <ion-item>
                        <ion-icon name="person-sharp"></ion-icon>&nbsp;
                        <ion-input name="id_number" [(ngModel)]='user.id_number' type="number" #idCtrl="ngModel" placeholder="ID Number" ngModel required number></ion-input>
                    </ion-item>
                    <ion-label *ngIf="!idCtrl.valid && idCtrl.touched">
                        <ion-text color="danger">ID Number is not valid</ion-text>
                    </ion-label><br>
                </div><br>
                <div>
                    <ion-button size="large" type="submit" color='secondary' [disabled]="form.invalid" expand="block">Submit</ion-button>
                </div>
            </ion-card-content>
        </form>
    </ion-card>
</ion-content>